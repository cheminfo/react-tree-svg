<html>
  <head>
    <script src="../dist/react-tree-svg.js" type="text/javascript"></script>
  </head>

  <body>
    <div id="react-tree-svg"></div>
    <div id="taxonomies-graph" onclick="handleClick(event)"></div>
    <script>
      async function getMolecules() {
        const response = await fetch('data/molecules.json');
        const data = await response.json();
        const svg = TreeSVG.render(data, {
          nodeRenderer: 'molecule',
          nodeRendererOptions: {
            masses: [
              58.065, 105.0697, 133.0647, 135.0439, 163.0752, 194.1173, 530.15,
            ],
            precision: 50,
          },
          positionOptions: {
            spacingHorizontal: 150,
          },
        });

        const responseTaxonomies = await fetch('data/taxonomies.json');
        const dataTaxonomies = await responseTaxonomies.json();
        const svgTaxonomies = TreeSVG.render(dataTaxonomies, {
          nodeRenderer: 'taxonomy',
          rankDepthOptions: {
            maxRankDepth: 8,
          },
          positionOptions: {
            spacingHorizontal: 100,
          },
        });
        document.getElementById('react-tree-svg').innerHTML = svg;
        document.getElementById('taxonomies-graph').innerHTML = svgTaxonomies;
      }
      getMolecules();
      function handleClick(event) {
        const target = event.target;
        console.log(target);
        if (target.tagName === 'text') {
          const url = target.getAttribute('data-url');
          if (url) {
            window.open(url, '_blank');
          }
        }
      }
    </script>
  </body>
</html>
